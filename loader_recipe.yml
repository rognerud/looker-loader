recipes:
  - name: primary_key
    filters:
      field_order:
        - 0
    dimension:
      primary_key: true

  - name: hide_records
    filters:
      db_type: RECORD
    dimension:
      hidden: true

  - name: group_ids
    dimension:
      group_label: Identifiers
      value_format_name: id
      measures:
        - type: count_distinct
    filters:
      regex_include: _id$|^pk.*_|_code$

  - name: numbers
    filters:
      type: number
      regex_exclude: _id$|^pk_|_code$
    dimension:
      group_label: Numbers
      value_format_name: decimal_1
      measures:
        - type: sum
          label: "Sum {{ parent_label }}"



  - name: time_second_values
    filters:
      regex_include: _seconds$
      type: number
    dimension:
      group_label: Durations
      value_format_name: decimal_0
      variants:
        - suffix: minutes
          remove: _seconds
          sql: ${ {{ parent_name }} } / 60
          measures:
            - type: sum
      measures:
        - type: sum

  - name: time_date_values
    filters:
      regex_include: _date
      type: date
    dimension:
      timeframes:
        - raw
        - time
        - time_of_day
        - date
        - week
        - month
        - quarter
        - year
        - day_of_week
        - week_of_year
      variants:
        - suffix: iso_year
          type: number
          remove: _date
          group_label: "{{ parent_name.replace('_', ' ').title() }}"
          sql: Extract(isoyear from ${{{ parent_name }}})
        - suffix: iso_week
          group_label: "{{ parent_name.replace('_', ' ').title() }}"
          type: number
          remove: _date
          sql: Extract(isoweek from ${{{ parent_name }}})

  - name: yesno
    filters:
      type: yesno
    dimension:
      group_label: Yes/No
      html: >-
          <a href='#drillmenu' target='_self'>
            {% if value == 'Yes' %}
            <span style='color:#B2AEFF;text-align:center;'>✔</span><span> Yes </span>
            {% else %}
            <span style='color:#F9A4A9;text-align:center;'>✖</span><span> No </span>
            {% endif %}
          </a>